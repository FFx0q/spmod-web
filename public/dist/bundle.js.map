{"version":3,"file":"bundle.js","sources":["../../web/Utils/index.js","../../web/Header/header.js","../../web/Footer/footer.js","../../web/spmod.js","../../web/Home/home.js","../../web/Builds/builds.js"],"sourcesContent":["export const parseRequestUrl = () => {\n    let url = location.hash.slice(1).toLowerCase() || '/';\n    let r = url.split(\"/\")\n    let request = {\n        resource: null,\n        id: null,\n        verb: null\n    }\n    request.resource = r[1]\n    request.id = r[2]\n    request.verb = r[3]\n\n    return request\n}","import './header.scss'\n\nconst Header = {\n    before_render: async () => {\n        const header = document.createElement('header')\n        header.className = 'header'\n\n        return header\n    },\n    render: async () => {\n        const view = `\n            <div class=\"brand\">\n                <h1>SPMod</h1>\n            </div>\n        `\n\n        return view\n    }\n}\n\nexport default Header\n\n","import './footer.scss'\n\nconst Footer = {\n    before_render: async () => {\n        const footer = document.createElement('footer')\n        footer.className = 'header'\n\n        return footer\n    },\n    render: async () => {\n        const view = `\n            <span>Â© Copyright 2019 - 2020 <a href=\"https://github.com/FFx0q\">FFx0q</a></span>\n        `\n\n        return view\n    }\n}\n\nexport default Footer","import { parseRequestUrl } from './Utils'\n\nimport Header from './Header/header'\nimport Footer from './Footer/footer'\n\nimport Builds from './Builds/builds'\nimport Home from './Home/home'\n\nimport 'normalize.css'\nimport './spmod.scss'\n\nconst routes = {\n    '/' : Home,\n    '/b/:id' : Builds\n}\n\nconst router = async () => {\n    const header = null || document.querySelector(\"#app > header\")\n    const content = null || document.querySelector(\"#app > main\")\n    const footer = null || document.querySelector(\"#app > footer\")\n\n    const req = parseRequestUrl()\n    const url = (req.resource ? '/' + req.resource : '/') + (req.id ? '/:id' : '') + (req.verb ? '/' + req.verb : '')\n\n    const page = routes[url]\n\n    header.innerHTML = await Header.render()\n    content.innerHTML = await page.render()\n    footer.innerHTML = await Footer.render()\n}\n\nwindow.onload = async (e) => {\n    e.preventDefault()\n\n    const app = null || document.querySelector(\"#app\")\n\n    const content = document.createElement('main')\n    content.className = 'container'\n\n    const header = await Header.before_render()\n    const footer = await Footer.before_render()\n\n    app.appendChild(header)\n    app.appendChild(content)\n    app.appendChild(footer)\n\n}\nwindow.addEventListener(\"hashchange\", router)\nwindow.addEventListener('load', router)","const getBuilds = async () => {\n    try {\n        const response = await fetch(`https://localhost:8080/builds`)\n        const json = await response.json()\n\n        return json\n    } catch (e) {\n        throw e\n    }\n}\n\nconst Home = {\n    render: async () => {\n        const builds = await getBuilds()\n        const view = `\n            <table>\n            <thead>\n                <tr>\n                    <th>Build</th>\n                    <th>Commit</th>\n                </tr>\n            </thead>\n            <tbody>\n                ${ builds.map( b => \n                    `<tr>\n                        <td>\n                            <i class=\"far fa-folder\"></i> \n                            <a href='#/b/${b.build}'>${b.build}</a>\n                        </td>\n                        <td>\n                            <a href=\"https://github.com/Amaroq7/SPmod/commit/${b.commit}\">#${b.commit}</a>\n                        </td>\n                    </tr>`\n                ).join('\\n')}\n            </tbody>\n            </table>\n        `\n        return view\n    } \n}\n\nexport default Home","import { parseRequestUrl } from '../Utils'\n\nconst getBuild = async (id) => {\n    try {\n        const response = await fetch(`https://localhost:8080/builds/${id}`)\n        const json = await response.json()\n\n        return json\n    } catch (e) {\n        throw e\n    }\n}\n\nconst Builds = {\n    render: async () => {\n        const request = parseRequestUrl()\n        const builds = await getBuild(request.id)\n        const view = `\n            <table>\n            <thead>\n                <tr>\n                    <th>File</th>\n                    <th>Size</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr>\n                    <td>\n                        <i class=\"fas fa-level-up-alt\"></i>\n                        <a href='#/'>Parent directory</a>\n                    <td>\n                </tr>\n                ${ builds['files'].map( f =>  \n                    `<tr>\n                        <td>\n                            <i class=\"far fa-file-archive\"></i>\n                            <a href='/builds/${f.file}' download>${f.file}\n                        </td>\n                        <td>${f.size} kb</td>\n                    </tr>`\n                ).join('\\n') }\n            </tbody>\n            </table>\n        `\n        return view\n    } \n}\n\nexport default Builds"],"names":["parseRequestUrl","r","location","hash","slice","toLowerCase","split","request","resource","id","verb","Header","async","header","document","createElement","className","Footer","footer","routes","/","render","response","fetch","json","e","getBuilds","map","b","build","commit","join","/b/:id","getBuild","f","file","size","router","querySelector","content","req","url","page","innerHTML","window","onload","preventDefault","app","appendChild","addEventListener"],"mappings":"2FAAO,MAAMA,EAAkB,KAC3B,IACIC,GADMC,SAASC,KAAKC,MAAM,GAAGC,eAAiB,KACtCC,MAAM,KACdC,EAAU,CACVC,SAAU,KACVC,GAAI,KACJC,KAAM,MAMV,OAJAH,EAAQC,SAAWP,EAAE,GACrBM,EAAQE,GAAKR,EAAE,GACfM,EAAQG,KAAOT,EAAE,GAEVM,GCVLI,EACaC,UACX,MAAMC,EAASC,SAASC,cAAc,UAGtC,OAFAF,EAAOG,UAAY,SAEZH,GALTF,EAOMC,SACS,kGCRfK,EACaL,UACX,MAAMM,EAASJ,SAASC,cAAc,UAGtC,OAFAG,EAAOF,UAAY,SAEZE,GALTD,EAOML,SACS,4GCCfO,EAAS,CACXC,ICDS,CACTC,OAAQT,SAES,sOAdHA,WACd,IACI,MAAMU,QAAiBC,MAAM,iCAG7B,aAFmBD,EAASE,OAG9B,MAAOC,GACL,MAAMA,IAMeC,IAUHC,IAAKC,GACX,4IAGuBA,EAAEC,UAAUD,EAAEC,wJAGsBD,EAAEE,YAAYF,EAAEE,wEAG7EC,KAAK,+DDpBnBC,SEAW,CACXX,OAAQT,UACJ,MAAML,EAAUP,IA6BhB,MA3Ba,4bAfJY,OAAOH,IACpB,IACI,MAAMa,QAAiBC,MAAM,iCAAiCd,GAG9D,aAFmBa,EAASE,OAG9B,MAAOC,GACL,MAAMA,IAOeQ,CAAS1B,EAAQE,KAgBb,MAAEkB,IAAKO,GACpB,qJAG2BA,EAAEC,kBAAkBD,EAAEC,oEAEvCD,EAAEE,2CAEdL,KAAK,iEFxBjBM,EAASzB,UACX,MAAMC,EAAiBC,SAASwB,cAAc,iBACxCC,EAAkBzB,SAASwB,cAAc,eACzCpB,EAAiBJ,SAASwB,cAAc,iBAExCE,EAAMxC,IACNyC,GAAOD,EAAIhC,SAAW,IAAMgC,EAAIhC,SAAW,MAAQgC,EAAI/B,GAAK,OAAS,KAAO+B,EAAI9B,KAAO,IAAM8B,EAAI9B,KAAO,IAExGgC,EAAOvB,EAAOsB,GAEpB5B,EAAO8B,gBAAkBhC,IACzB4B,EAAQI,gBAAkBD,EAAKrB,SAC/BH,EAAOyB,gBAAkB1B,KAG7B2B,OAAOC,OAASjC,MAAOa,IACnBA,EAAEqB,iBAEF,MAAMC,EAAcjC,SAASwB,cAAc,QAErCC,EAAUzB,SAASC,cAAc,QACvCwB,EAAQvB,UAAY,YAEpB,MAAMH,QAAeF,IACfO,QAAeD,IAErB8B,EAAIC,YAAYnC,GAChBkC,EAAIC,YAAYT,GAChBQ,EAAIC,YAAY9B,IAGpB0B,OAAOK,iBAAiB,aAAcZ,GACtCO,OAAOK,iBAAiB,OAAQZ"}